'use strict';
module.exports = {
  fromStr: function(str, current_ssml) {
    var ssml_str;
    str = str || '';
    str = str.replace(/<speak>/gi, ' ').replace(/<\/speak>/gi, ' ').trim();
    current_ssml = current_ssml || '';
    current_ssml = current_ssml.replace(/<speak>/gi, ' ').replace(/<\/speak>/gi, ' ').trim();
    ssml_str = '<speak>' + current_ssml + (current_ssml === '' ? '' : ' ') + str + '</speak>';
    return ssml_str.replace(RegExp('  +'), ' ');
  },
  cleanse: function(str) {
    return str.replace(/<\/?(speak|break|phoneme|audio|say-as|s\b|w\b)[^>]*>/gi, ' ').replace(/\s*\n\s*/g, '\n').replace(RegExp('  +', 'g'), ' ').replace(RegExp(' ([.,!?;:])', 'g'), '$1').trim();
  }
};
