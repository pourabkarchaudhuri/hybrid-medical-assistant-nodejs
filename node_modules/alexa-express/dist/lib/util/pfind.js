module.exports = function(arr, fn, test) {
  var idx, p;
  idx = 0;
  p = fn(arr[idx++]);
  return p = p.then(function(val) {
    if (test(val)) {
      return val;
    }
    if (idx >= arr.length) {
      return;
    }
    return fn(arr[idx++]);
  });
};
